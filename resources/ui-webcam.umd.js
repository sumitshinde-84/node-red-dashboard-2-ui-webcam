(function(){"use strict";try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode('.ui-webcam-wrapper[data-v-6516c46b]{position:relative;border-radius:5px;box-shadow:#000000e6 0 2px 4px}.video-wrapper[data-v-6516c46b]{background:black;width:auto;height:100%;border-radius:5px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;-webkit-transform:scaleX(-1);transform:scaleX(-1)}.canvas[data-v-6516c46b]{z-index:1;position:absolute;width:100%;height:100%}.button[data-v-6516c46b]{position:absolute;margin-left:auto;width:35px;height:35px;display:flex;align-items:center;justify-content:center;z-index:2;right:auto;background:rgb(255,255,255);border:none;padding:10px;border-radius:50%;cursor:pointer;box-shadow:#0000001a 0 2px 4px}.dropdown ul li.group-label[data-v-6516c46b]{padding:5px 10px;cursor:default;font-weight:700;color:#555;font-size:.75rem;display:flex;position:relative;white-space:nowrap;gap:12px;background-color:rgb(var(--v-theme-background))}.dropdown ul li.group-label[data-v-6516c46b]:after{content:" ";display:block;height:2px;flex-grow:1;width:100%;margin-top:9px;background:rgb(var(--v-theme-group-outline))}.dropdown ul li.group-label[data-v-6516c46b]:hover{background-color:#fff;padding:5px 10px;cursor:default;font-weight:700;color:#555}.icon .capture-button[data-v-6516c46b]{width:30px;height:30px}.button[data-v-6516c46b]:hover{background-color:rgb(var(--v-theme-primary))}.capture-button[data-v-6516c46b]{margin-top:60%}.ellipsis[data-v-6516c46b]{position:absolute;left:10px;top:10px;cursor:pointer;z-index:2;padding:5px;box-shadow:#0000001a 0 2px 4px}.ellipsis span[data-v-6516c46b]{display:block;width:4px;height:4px;background-color:#fff;border-radius:50%;margin-bottom:3px}.dropdown[data-v-6516c46b]{position:absolute;top:40px;right:10px;background-color:#fff;border:1px solid #ccc;border-radius:5px;z-index:2;display:none}.dropdown ul[data-v-6516c46b]{list-style:none;padding:0;margin:0}.dropdown ul li[data-v-6516c46b]{padding:5px 10px;cursor:pointer}.dropdown ul li[data-v-6516c46b]:hover{background-color:rgb(var(--v-theme-primary));color:#fff}.dropdown.open[data-v-6516c46b]{display:block}')),document.head.appendChild(o)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
(function(i,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("vuex"),require("vue")):typeof define=="function"&&define.amd?define(["exports","vuex","vue"],l):(i=typeof globalThis<"u"?globalThis:i||self,l(i["ui-webcam"]={},i.vuex,i.Vue))})(this,function(i,l,t){"use strict";const m="data:image/png;base64,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",h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEU0lEQVR4nO2c26tWRRjGf1kpFlQaStneiWZIUShujPRfyCsvOqdCUBGFN0pEYRdB6aaLPBBYeBNFUEknwiCzqButXQSRGVQSEmaUkocOlk4MvB/I3t9hvtWaw7f284MHNnt/e7533metmVkzswaEEEIIIYQQQgghhBBCCCGEEEKIYC4FVgIbgI0VtcHKuER5r85MYBvwJ+Bq0h/AVmCGjOmPRcChGo0Yrx+BG2VKGPOAXyOa0dIvwFyZ0psPE5jR0h4Z0p1bEprR0gqZ0pl9GQwZA86TKRNZkcGMlvydOamYAlxpo6eRDhrLaMhYl7gWWey+DgPN9cDjVtl/Mybb1SRfh8+Ax4DrGCD8UPJF4GwBSXSR5Ov2KrCAwlkLnC4gYS6R/gYepkAuBF4oIEEuk7YDF1AQzxWQFJdZft6tCB4sIBmuEN2f24yrgFMFJMIVIj+bPJTTkB0FJMEVpudzmTGnIc8Xrmb9Yw+SyXkgc8WPAO/ZglNrZXCr/e5I5tjuy2HIrgwVPQpssumMbhOC/m+LgVHgWIY43yUDPyV+ANsOzKoQ5wy7e+pcCu4lv9qZlCnWVqao3H7g2hpiXggcSBTz6dSTkbMTVWyX7Tqpi8usj0kRu89RMoYSVOhjYGqkaZ49CeIfapIhByv2F6FcDnwnQ8LMOGMLQ7G5KfISQWPukJf6jGUaMGzqt4l7RYb0Ht7OC0ymv4t2jptL8z+/DiwJLOOaiOs3jbhDdgZ+/6PWtHVr9h4JLOsNGdI5kbcFrkqGGhyymnenDKk+dp/b5xO3/+zVPcq8Qoa0T97hgKt5Y4Vm8KmAcmNMRg58H7I34Hs/r1Cu34bUi09lyMTE7Y50Jf8cUO4HMmRi4j4KSNzBCoZ8H1DuJzJkYuK+CkjcOxUS91ZAuV/LkPYjovN7JO7uConzw9pu+P1Uf8mQ9skb6ZE8b9iXfSTviwCTl0YwoxGjLGcbmUOmOw4HlOU/Mz+gPP+GrgzpkIRvAl+eGe4xMno/8Ar1q3rfypDuV+QdhLMceBp4zeR/XtbH/98VyYzGNFkO+MGm1GMz1YbEMiQgCU8kMOTJiGY06g5xtpJ3a8T4VyZ4oahRhjjgBHBzhNh9H3MyQfyNM8TZA9vqGuO+3Xaou6YZMitRpZw1LVv+54ExM23fr0uomLtm2o7fU79L+BuwDriojzgvBtbbnuCUsSbfuUjk03pcFx23nSmrgBvGDZGn2Sk/vpl72fqhHDH604aS83amyroOfU2MCcKqejOHIfcWUHFXqNbkMGT2JHsn3fWxtyxph34u2wpIgCtMz5IRfyX8XkASXCE6nvo1hHasKiARrgCdtdnjIhgtICEus/zUfzH4h6BnCkiKy6TRUs/TWjPJTnY4CdxD4fiOfnPCl0JdBp2xM8GyHBBQlWHbfb4707virmYds7X6h6xuA890O4FtZMC0wGIXQgghhBBCCCGEEEIIIYQQQgghBPn4D/EjZVcZ7auaAAAAAElFTkSuQmCC",A=(e,o)=>{const s=e.__vccOpts||e;for(const[r,a]of o)s[r]=a;return s},p={name:"UIWebcam",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},data(){return{imageData:null,cameraDevices:[],selectedDevice:null,cameraIsOn:!1,dropdownOpen:!1}},computed:{...l.mapState("data",["messages"]),value:{get(){var e;return(e=this.messages[this.id])==null?void 0:e.payload}}},mounted(){this.$socket.on("msg-input:"+this.id,async e=>{e.payload==="capture"&&(await this.startWebcam(),await this.captureImage())})},beforeUnmount(){var e,o;(e=this.$socket)==null||e.off("widget-load:"+this.id),(o=this.$socket)==null||o.off("msg-input:"+this.id),this.stopWebcam()},methods:{async startWebcam(){if(!this.cameraIsOn)try{const o=(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput");o.length>0?(this.cameraDevices=o,this.selectedDevice=o[0].deviceId,await this.openCamera()):console.error("No video input devices found.")}catch(e){console.error("Error accessing media devices:",e)}},async openCamera(){if(this.selectedDevice==="off")this.stopWebcam(),this.cameraIsOn=!1;else{const e=this.$refs.video,o={video:{deviceId:this.selectedDevice}};try{const s=await navigator.mediaDevices.getUserMedia(o);e&&e instanceof HTMLVideoElement?(e.srcObject=s,e.play(),this.cameraIsOn=!0):console.error("Video element not found or not an instance of HTMLVideoElement.")}catch(s){console.error("Error accessing webcam:",s)}}},stopWebcam(){var o;const e=(o=this.$refs.video.srcObject)==null?void 0:o.getTracks();e&&e.forEach(s=>s.stop())},captureImage(){const e=this.$refs.video,o=this.$refs.canvas,s=o.getContext("2d");if(e&&e.readyState===e.HAVE_ENOUGH_DATA){const r=e.videoWidth,a=e.videoHeight;o.width=r,o.height=a,s.drawImage(e,0,0,r,a),this.imageData=o.toDataURL("image/png"),this.send(this.imageData),setTimeout(()=>{s.clearRect(0,0,r,a)},500)}else console.error("Video element not ready or not found.")},send(e){this.$socket.emit("widget-action",this.id,{payload:e})},async changeCamera(){this.stopWebcam(),await this.openCamera()},toggleDropdown(){this.dropdownOpen=!this.dropdownOpen},selectCamera(e){this.selectedDevice=e,this.toggleDropdown(),this.changeCamera()}}},d=e=>(t.pushScopeId("data-v-6516c46b"),e=e(),t.popScopeId(),e),g={class:"ui-webcam-wrapper"},f={class:"video-wrapper"},u={ref:"video",width:"100%",height:"100%",playsinline:"","webkit-playsinline":"",muted:""},C={ref:"canvas",class:"canvas"},w=[d(()=>t.createElementVNode("img",{class:"icon",src:h,height:"30px",width:"30px",alt:"Capture Image"},null,-1))],k=[d(()=>t.createElementVNode("span",null,null,-1)),d(()=>t.createElementVNode("span",null,null,-1)),d(()=>t.createElementVNode("span",null,null,-1))],G=d(()=>t.createElementVNode("li",{class:"group-label"},"Select camera",-1)),I=["onClick"];function b(e,o,s,r,a,c){return t.openBlock(),t.createElementBlock("div",g,[t.createElementVNode("div",f,[t.createElementVNode("video",u,null,512),t.createElementVNode("canvas",C,null,512),a.cameraIsOn===!1?(t.openBlock(),t.createElementBlock("button",{key:0,class:"button power-button",onClick:o[1]||(o[1]=(...n)=>c.startWebcam&&c.startWebcam(...n))},[t.createElementVNode("img",{class:"icon",src:m,height:"30px",width:"30px",alt:"Capture Image",onClick:o[0]||(o[0]=(...n)=>c.startWebcam&&c.startWebcam(...n))})])):t.createCommentVNode("",!0),a.cameraIsOn?(t.openBlock(),t.createElementBlock("button",{key:1,class:"button capture-button",onClick:o[2]||(o[2]=(...n)=>c.captureImage&&c.captureImage(...n))},w)):t.createCommentVNode("",!0),a.cameraIsOn?(t.openBlock(),t.createElementBlock("div",{key:2,class:"ellipsis",onClick:o[3]||(o[3]=(...n)=>c.toggleDropdown&&c.toggleDropdown(...n))},k)):t.createCommentVNode("",!0)]),a.cameraIsOn?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(["dropdown",{open:a.dropdownOpen}])},[t.createElementVNode("ul",null,[t.createElementVNode("li",{onClick:o[4]||(o[4]=n=>c.selectCamera("off"))},"Turn Camera Off"),G,(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(a.cameraDevices,n=>(t.openBlock(),t.createElementBlock("li",{key:n.deviceId,onClick:S=>c.selectCamera(n.deviceId)},t.toDisplayString(n.label),9,I))),128))])],2)):t.createCommentVNode("",!0)])}const E=A(p,[["render",b],["__scopeId","data-v-6516c46b"]]);i.UIWebcam=E,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
